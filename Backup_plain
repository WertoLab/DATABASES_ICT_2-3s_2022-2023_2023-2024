--
-- PostgreSQL database dump
--

-- Dumped from database version 14.3
-- Dumped by pg_dump version 16.0

-- Started on 2023-10-26 22:13:46 MSK

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 6 (class 2615 OID 83898)
-- Name: lab3; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA lab3;


ALTER SCHEMA lab3 OWNER TO postgres;

--
-- TOC entry 4 (class 2615 OID 2200)
-- Name: public; Type: SCHEMA; Schema: -; Owner: postgres
--

-- *not* creating schema, since initdb creates it


ALTER SCHEMA public OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 211 (class 1259 OID 83909)
-- Name: client; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.client (
    phone_number integer NOT NULL,
    address character(1),
    full_name character(1)
);


ALTER TABLE lab3.client OWNER TO postgres;

--
-- TOC entry 210 (class 1259 OID 83902)
-- Name: client_card; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.client_card (
    card_number integer NOT NULL,
    validity character varying,
    client_phone_number integer
);


ALTER TABLE lab3.client_card OWNER TO postgres;

--
-- TOC entry 214 (class 1259 OID 83942)
-- Name: firm; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.firm (
    id_firm integer NOT NULL,
    title character(1),
    address character(1),
    mobile_address integer
);


ALTER TABLE lab3.firm OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 83967)
-- Name: fuel; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.fuel (
    code integer NOT NULL,
    provider integer,
    gas_station integer,
    type integer,
    unit character(1),
    price_per_liter integer,
    price_validity character(1)
);


ALTER TABLE lab3.fuel OWNER TO postgres;

--
-- TOC entry 216 (class 1259 OID 83955)
-- Name: fuel_manufacturer; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.fuel_manufacturer (
    id_fuel integer,
    fuel integer,
    provider integer,
    code integer,
    fuel_code integer
);


ALTER TABLE lab3.fuel_manufacturer OWNER TO postgres;

--
-- TOC entry 212 (class 1259 OID 83924)
-- Name: fuel_sales; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.fuel_sales (
    id_sales integer NOT NULL,
    amount integer,
    date character(1),
    card_number integer,
    code integer
);


ALTER TABLE lab3.fuel_sales OWNER TO postgres;

--
-- TOC entry 213 (class 1259 OID 83932)
-- Name: gas_station; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.gas_station (
    city character(1),
    address integer,
    code integer NOT NULL,
    id_firm integer
);


ALTER TABLE lab3.gas_station OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 83980)
-- Name: gas_station_fuel; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.gas_station_fuel (
    id_deal integer,
    fuel integer,
    gas_station integer,
    begin_of_deal character(1),
    end_of_deal character(1),
    id_sales integer
);


ALTER TABLE lab3.gas_station_fuel OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 83952)
-- Name: manufacturer; Type: TABLE; Schema: lab3; Owner: postgres
--

CREATE TABLE lab3.manufacturer (
    code integer NOT NULL,
    fuel integer,
    address integer,
    firm integer
);


ALTER TABLE lab3.manufacturer OWNER TO postgres;

--
-- TOC entry 3624 (class 0 OID 83909)
-- Dependencies: 211
-- Data for Name: client; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.client (phone_number, address, full_name) FROM stdin;
\.


--
-- TOC entry 3623 (class 0 OID 83902)
-- Dependencies: 210
-- Data for Name: client_card; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.client_card (card_number, validity, client_phone_number) FROM stdin;
\.


--
-- TOC entry 3627 (class 0 OID 83942)
-- Dependencies: 214
-- Data for Name: firm; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.firm (id_firm, title, address, mobile_address) FROM stdin;
\.


--
-- TOC entry 3630 (class 0 OID 83967)
-- Dependencies: 217
-- Data for Name: fuel; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.fuel (code, provider, gas_station, type, unit, price_per_liter, price_validity) FROM stdin;
\.


--
-- TOC entry 3629 (class 0 OID 83955)
-- Dependencies: 216
-- Data for Name: fuel_manufacturer; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.fuel_manufacturer (id_fuel, fuel, provider, code, fuel_code) FROM stdin;
\.


--
-- TOC entry 3625 (class 0 OID 83924)
-- Dependencies: 212
-- Data for Name: fuel_sales; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.fuel_sales (id_sales, amount, date, card_number, code) FROM stdin;
\.


--
-- TOC entry 3626 (class 0 OID 83932)
-- Dependencies: 213
-- Data for Name: gas_station; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.gas_station (city, address, code, id_firm) FROM stdin;
\.


--
-- TOC entry 3631 (class 0 OID 83980)
-- Dependencies: 218
-- Data for Name: gas_station_fuel; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.gas_station_fuel (id_deal, fuel, gas_station, begin_of_deal, end_of_deal, id_sales) FROM stdin;
\.


--
-- TOC entry 3628 (class 0 OID 83952)
-- Dependencies: 215
-- Data for Name: manufacturer; Type: TABLE DATA; Schema: lab3; Owner: postgres
--

COPY lab3.manufacturer (code, fuel, address, firm) FROM stdin;
\.


--
-- TOC entry 3464 (class 2606 OID 83908)
-- Name: client_card ClientCard_pkey; Type: CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.client_card
    ADD CONSTRAINT "ClientCard_pkey" PRIMARY KEY (card_number);


--
-- TOC entry 3466 (class 2606 OID 83913)
-- Name: client client_pkey; Type: CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.client
    ADD CONSTRAINT client_pkey PRIMARY KEY (phone_number);


--
-- TOC entry 3472 (class 2606 OID 83946)
-- Name: firm firm_pkey; Type: CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.firm
    ADD CONSTRAINT firm_pkey PRIMARY KEY (id_firm);


--
-- TOC entry 3476 (class 2606 OID 83971)
-- Name: fuel fuel_pkey; Type: CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.fuel
    ADD CONSTRAINT fuel_pkey PRIMARY KEY (code);


--
-- TOC entry 3468 (class 2606 OID 83984)
-- Name: fuel_sales fuel_sales_pkey; Type: CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.fuel_sales
    ADD CONSTRAINT fuel_sales_pkey PRIMARY KEY (id_sales);


--
-- TOC entry 3470 (class 2606 OID 83936)
-- Name: gas_station gas_station_pkey; Type: CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.gas_station
    ADD CONSTRAINT gas_station_pkey PRIMARY KEY (code);


--
-- TOC entry 3474 (class 2606 OID 83961)
-- Name: manufacturer manufacturer_pkey; Type: CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.manufacturer
    ADD CONSTRAINT manufacturer_pkey PRIMARY KEY (code);


--
-- TOC entry 3477 (class 2606 OID 83919)
-- Name: client_card client_card_client_phone_number_fkey; Type: FK CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.client_card
    ADD CONSTRAINT client_card_client_phone_number_fkey FOREIGN KEY (client_phone_number) REFERENCES lab3.client(phone_number) ON DELETE CASCADE;


--
-- TOC entry 3481 (class 2606 OID 83962)
-- Name: fuel_manufacturer fuel_manufacturer_code_fkey; Type: FK CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.fuel_manufacturer
    ADD CONSTRAINT fuel_manufacturer_code_fkey FOREIGN KEY (code) REFERENCES lab3.manufacturer(code) ON DELETE CASCADE;


--
-- TOC entry 3482 (class 2606 OID 83972)
-- Name: fuel_manufacturer fuel_manufacturer_fuel_code_fkey; Type: FK CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.fuel_manufacturer
    ADD CONSTRAINT fuel_manufacturer_fuel_code_fkey FOREIGN KEY (fuel_code) REFERENCES lab3.fuel(code) ON DELETE CASCADE;


--
-- TOC entry 3478 (class 2606 OID 83927)
-- Name: fuel_sales fuel_sales_card_number_fkey; Type: FK CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.fuel_sales
    ADD CONSTRAINT fuel_sales_card_number_fkey FOREIGN KEY (card_number) REFERENCES lab3.client_card(card_number) ON DELETE CASCADE;


--
-- TOC entry 3479 (class 2606 OID 83937)
-- Name: fuel_sales fuel_sales_code_fkey; Type: FK CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.fuel_sales
    ADD CONSTRAINT fuel_sales_code_fkey FOREIGN KEY (code) REFERENCES lab3.gas_station(code) ON DELETE CASCADE;


--
-- TOC entry 3483 (class 2606 OID 83985)
-- Name: gas_station_fuel gas_station_fuel_id_sales_fkey; Type: FK CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.gas_station_fuel
    ADD CONSTRAINT gas_station_fuel_id_sales_fkey FOREIGN KEY (id_sales) REFERENCES lab3.fuel_sales(id_sales) ON DELETE CASCADE;


--
-- TOC entry 3480 (class 2606 OID 83947)
-- Name: gas_station gas_station_id_firm_fkey; Type: FK CONSTRAINT; Schema: lab3; Owner: postgres
--

ALTER TABLE ONLY lab3.gas_station
    ADD CONSTRAINT gas_station_id_firm_fkey FOREIGN KEY (id_firm) REFERENCES lab3.firm(id_firm) ON DELETE CASCADE;


--
-- TOC entry 3637 (class 0 OID 0)
-- Dependencies: 4
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE USAGE ON SCHEMA public FROM PUBLIC;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2023-10-26 22:13:46 MSK

--
-- PostgreSQL database dump complete
--

